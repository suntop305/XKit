{"id":"reblog_as_text","script":"//* TITLE Reblog As Text **//\n//* VERSION 1.1.1 **//\n//* DESCRIPTION Text posts remain text **//\n//* DETAILS This post allows you to always reblog text posts as text posts, and not as links. **//\n//* DEVELOPER STUDIOXENIX **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.reblog_as_text = new Object({\n\n\trunning: false,\n\n\trun: function() {\n\t\tthis.running = true;\n\n\t\tif (document.location.href.indexOf(\"://www.tumblr.com/reblog/\") !== -1) {\n\t\t\tsetTimeout(function() { XKit.extensions.reblog_as_text.fix_page(); }, 10);\n\t\t}\n\n\t\tif ($(\".posts .post\").length > 0) {\n\t\t\t$(document).on(\"click\", \".reblog_button, .post_control.reblog\", XKit.extensions.reblog_as_text.fix_page);\n\t\t}\n\n\t},\n\n\tfix_page: function() {\n\n\t\tif ($(\"#tumblelog_choices\").length === 0 || $(\".mceEditor\").length === 0) {\n\t\t\tXKit.console.add(\"Reblog window Not active yet, delaying..\");\n\t\t\tsetTimeout(function() { XKit.extensions.reblog_as_text.fix_page(); }, 100);\n\t\t\treturn;\n\t\t}\n\n\t\tif ($(\"#reblog_as\").length === 0) {\n\t\t\t// Already probably reblogging as a text.\n\t\t\tXKit.console.add(\"\\\"Reblog As\\\" div not found, quitting.\");\n\t\t\treturn;\n\t\t}\n\n\t\tXKit.console.add(\"Switching to reblog as text mode.\");\n\t\tvar do_this = false;\n\t\tif ($(\"#reblog_select\").find(\".option:first-child\").attr('data-option-value') === \"text\") {\n\t\t\tdo_this = true;\n\t\t}\n\n\t\tvar m_tags = \"\";\n\t\t// Get tags, if possible.\n\t\tif ($(\".main_content\").find(\".tags\").length > 0) {\n\t\t\t$(\".main_content\").find(\".tags\").find(\".tag\").each(function() {\n\t\t\t\tm_tags = m_tags + \",\" + $(this).html();\n\t\t\t});\n\t\t}\n\n\t\tif (!do_this) {\n\t\t\treturn;\n\t\t}\n\n\t\tfunction m_function() {\n\t\t\txkit_do_switch_to_text();\n\n\t\t\tfunction xkit_do_switch_to_text() {\n\t\t\t\tif (jQuery(\".mceLayout\").length <= 0) {\n\t\t\t\t\tsetTimeout(function() {\n\t\t\t\t\t\txkit_do_switch_to_text();\n\t\t\t\t\t}, 100);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar inner = jQuery(\".post_form_wrapper_inner\");\n\t\t\t\tvar height = inner.height();\n\t\t\t\tinner.empty().append(jQuery('<div class=\"dummy\"/>').height(height));\n\t\t\t\tif (this.destroy_preview) {\n\t\t\t\t\tthis.destroy_preview();\n\t\t\t\t}\n\t\t\t\tTumblr.PostForms.change_reblog_type(\"text\", jQuery('body').attr('data-page-root'), inner, height, \"\");\n\t\t\t}\n\t\t}\n\n\t\ttry {\n\t\t\tvar script = document.createElement(\"script\");\n\t\t\tscript.textContent = script.textContent + \"(\" + m_function.toString() + \")();\";\n\t\t\tdocument.body.appendChild(script);\n\t\t} catch (e) { alert(e.message); }\n\n\t\t// If reblog yourself is installed, call it.\n\t\tXKit.installed.when_running(\"reblog_yourself\", function() {\n\t\t\tsetTimeout(function() {\n\t\t\t\tXKit.extensions.reblog_yourself.fix_page();\n\t\t\t}, 500);\n\t\t});\n\n\t\t// Import links if possible.\n\t\tif (m_tags !== \"\") {\n\t\t\tsetTimeout(function() {\n\t\t\t\tXKit.extensions.reblog_as_text.try_to_inject_tags(m_tags);\n\t\t\t}, 1000);\n\t\t}\n\t},\n\n\ttry_to_inject_tags: function(to_add) {\n\n\t\tif ($(\"#post_content\").length <= 0) {\n\t\t\tsetTimeout(function() {\n\t\t\t\tXKit.extensions.reblog_as_text.try_to_inject_tags(to_add);\n\t\t\t}, 200);\n\t\t\treturn;\n\t\t}\n\n\t\tvar tag_to_be_added = \"\";\n\t\tvar tags = to_add.split(\",\");\n\t\tfor (var i = 0; i < tags.length; i++) {\n\t\t\ttag_to_be_added = tags[i];\n\t\t\tif (tag_to_be_added !== \"\") {\n\t\t\t\tvar old_tags = $(\"#post_content\").find(\".tags\").find(\".post_tags\").val();\n\t\t\t\t$(\"#post_content\").find(\".tags\").find(\".post_tags\").val(old_tags + \",\" + tag_to_be_added);\n\t\t\t\t$(\"#post_content\").find(\".tags\").find(\".editor_wrapper\").before('<span class=\"tag\">' + tag_to_be_added + '</span>');\n\t\t\t}\n\t\t}\n\t\t$(\"#post_tags_label\").css('display', 'none');\n\t\t$(\"#post_tags\").val(to_add);\n\n\t},\n\n\tdestroy: function() {\n\t\t$(document).off(\"click\", \".reblog_button, .post_control.reblog\", XKit.extensions.reblog_as_text.fix_page);\n\t\tthis.running = false;\n\t}\n\n});\n","file":"found","server":"up","errors":false,"icon":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDJERTBFNURCQjNCMTFFMjlCOTNGRkUzMUI2Njc5QjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDJERTBFNUVCQjNCMTFFMjlCOTNGRkUzMUI2Njc5QjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMkRFMEU1QkJCM0IxMUUyOUI5M0ZGRTMxQjY2NzlCNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMkRFMEU1Q0JCM0IxMUUyOUI5M0ZGRTMxQjY2NzlCNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PhRmTWIAAAXhSURBVHjalFbNb1RV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","title":"Reblog As Text","description":"Text posts remain text","developer":"STUDIOXENIX","version":"1.1.1","details":"This post allows you to always reblog text posts as text posts, and not as links.","frame":"false","beta":"false","slow":"false"}