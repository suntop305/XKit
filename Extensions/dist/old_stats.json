{"id":"old_stats","script":"//* TITLE Old Stats **//\n//* VERSION 0.4.1 **//\n//* DESCRIPTION Blog stats where they were **//\n//* DEVELOPER New-XKit **//\n//* FRAME false **//\n//* BETA false **//\n\nXKit.extensions.old_stats = new Object({\n\n\trunning: false,\n\tdone: false,\n\n\tpreferences: {\n\t\t\"iconify\": {\n\t\t\ttext: \"Put the icons back on posts/followers/etc links\",\n\t\t\tdefault: true,\n\t\t\tvalue: true\n\t\t}\n\t},\n\n\trun: function() {\n\t\tthis.running = true;\n\t\tif (this.preferences.iconify.value) {\n\t\t\tXKit.tools.init_css(\"old_stats\");\n\t\t}\n\t\tif ($(\"#dashboard_controls_open_blog\").length) {\n\t\t\treturn;\n\t\t}\n\t\tGM_xmlhttpRequest({\n\t\t\tmethod: \"GET\",\n\t\t\turl: \"https://www.tumblr.com/likes\",\n\t\t\tonerror: function(response) {\n\t\t\t\tconsole.log(\"old_stats: Couldn't fetch blog info.\");\n\t\t\t},\n\t\t\tonload: function(response) {\n\t\t\t\t$(\".recommended_tumblelogs\").before($(\"#dashboard_controls_open_blog\", response.responseText).css(\"margin\", \"0 0 18px\"));\n\t\t\t\t$(\"#dashboard_controls_open_blog [data-sparkline]\").prepend('<canvas id=\"old_stats_canvas\" width=\"72\" height=\"30\" style=\"display: inline-block; width: 36px; height: 15px; vertical-align: top;\">');\n\t\t\t\tvar sparkline = JSON.parse($(\"#dashboard_controls_open_blog [data-sparkline]\").attr(\"data-sparkline\"));\n\t\t\t\tvar sparkpx = (Math.max.apply(Math, sparkline) - Math.min.apply(Math, sparkline)) / 30;\n\t\t\t\tvar canvas = document.getElementById(\"old_stats_canvas\").getContext(\"2d\");\n\t\t\t\tcanvas.strokeStyle = \"#FFFFFF\";\n\t\t\t\tcanvas.lineWidth = 3.5;\n\t\t\t\tcanvas.moveTo(0, 30 - (sparkline[0] / sparkpx));\n\t\t\t\tfor (var i = 0; i < sparkline.length; i++) {\n\t\t\t\t\tcanvas.lineTo((i + 0.5) * (72 / sparkline.length), 30 - (sparkline[i] / sparkpx));\n\t\t\t\t\tcanvas.stroke();\n\t\t\t\t}\n\t\t\t\tXKit.extensions.old_stats.done = true;\n\t\t\t}\n\t\t});\n\t},\n\n\tdestroy: function() {\n\t\tthis.running = false;\n\t\tXKit.tools.remove_css(\"old_stats\");\n\t\tif (this.done) {\n\t\t\t$(\"#dashboard_controls_open_blog\").remove();\n\t\t}\n\t}\n});\n","file":"found","server":"up","errors":false,"css":".control-item.control-anchor .hide_overflow::before {\n\tfont-family: tumblr-icons, None;\n\tfont-size: 24px;\n\tline-height: 0;\n\tfont-weight: normal;\n\tposition: relative;\n\ttop: 3px; left: 1px;\n}\n\n.control-item.control-anchor.posts .hide_overflow::before {\n\tcontent: \"\\EA8B\\2002\";\n}\n.control-item.control-anchor.followers .hide_overflow::before {\n\tcontent: \"\\EA44\\2002\";\n}\n.control-item.control-anchor.activity .hide_overflow::before {\n\tcontent: \"\\EA01\\2002\";\n\tleft: 5px;\n\tmargin-right: 11px;\n}\n.control-item.control-anchor.members .hide_overflow::before {\n\tcontent: \"\\EA59\\2002\";\n\tfont-size: 21px;\n\ttop: 2px; left: 2px;\n\tmargin-right: 5px;\n}\n.control-item.control-anchor.queue .hide_overflow::before {\n\tcontent: \"\\EA8D\\2002\";\n\tleft: -1px;\n}\n.control-item.control-anchor.drafts .hide_overflow::before {\n\tcontent: \"\\EA25\\2002\";\n}\n.control-item.control-anchor.processing .hide_overflow::before {\n\tcontent: \"\\EA8C\\2002\";\n}\n.control-item.control-anchor.customize .hide_overflow::before {\n\tcontent: \"\\EAB3\\2002\";\n}\n","title":"Old Stats","description":"Blog stats where they were","developer":"New-XKit","version":"0.4.1","frame":"false","beta":"false","slow":"false"}